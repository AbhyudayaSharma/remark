# mdast(3) -- Markdown processor

## SYNOPSIS

```javascript
var mdast = require('mdast');
var yamlConfig = require('mdast-yaml-config');

// Use a plugin.  mdast-yaml-config allows settings in YAML frontmatter.
var processor = mdast().use(yamlConfig);

// Parse, modify, and stringify the document:
var doc = processor.process(
    '---\n' +
    'mdast:\n' +
    '  commonmark: true\n' +
    '---\n' +
    '\n' +
    '2) Some *emphasis*, **strongness**, and `code`.\n'
);
```

## DESCRIPTION

This is the application programming interface documentation for **mdast**.
To find documentation for the command line interface, see `man 1 mdast`.

### mdast.use(plugin, options?)

Change the way **mdast** functions by using a plugin.  Plugins are documented
at <https://github.com/wooorm/mdast/blob/master/doc/plugins.md>.

**Signatures**

*   `processor = mdast.use(plugin, options?)`;
*   `processor = mdast.use(plugins)`.

**Parameters**

*   `plugin` (`Function`) -- Plugin.
*   `plugins` (`Array.<Function>`) -- List of plugins.
*   `options` (`Object?`) -- Passed to plugin.  Specified by its documentation.

**Returns**

`Object` -- An instance of **mdast**.  The instance functions just like the
**mdast** library itself (it has the same methods), but caches the `use`d
plugins.

### mdast.parse(file, options?)

Parse a markdown document into an abstract syntax tree.

**Signatures**

*   `ast = mdast.parse(file|value, options?)`.

**Parameters**

*   `file` (`VFile`) -- Virtual file.
*   `value` (`string`) -- Source of a (virtual) file.
*   `options` (`Object`) -- Settings.  See `man 7 mdastconfig`.

**Returns**

`Object` -- Node.  Nodes are documented at
<https://github.com/wooorm/mdast/blob/master/doc/nodes.md>.

### mdast.run(ast, file, done?)

Modify an abstract syntax tree by applying plugins to it.

**Signatures**

*   `ast = mdast.run(ast, file|value?, done?)`;
*   `ast = mdast.run(ast, done?)`.

**Parameters**

*   `ast` (`Object`) -- Syntax tree as returned by `parse()`;
*   `file` (`VFile`) -- Virtual file;
*   `value` (`string`) -- Source of the (virtual) file;
*   `done` (`function done(err?, doc?, file?)`).

**Returns**

`Object` -- Given AST.

### mdast.stringify(ast?, file?, options?)

Compile an abstract syntax tree into a document.

**Signatures**

*   `doc = mdast.stringify(ast?, file?, options?)`.

**Parameters**

*   `ast` (`Object`) -- Syntax tree as returned by `parse()`;
*   `file` (`VFile`) -- Virtual file;
*   `options` (`Object`) -- Settings.  See `man 7 mdastconfig`.

**Returns**

`string` -- Document.  Formatted in markdown by default, or in whatever a
plugin generates.

**Note**

Either an AST or a file which was previously passed to `mdast#parse()`, must
be given.

### mdast.process(file, options?, done?)

Parse, modify, and compile a markdown document it into something else.

**Signatures**

*   `doc = mdast.process(file|value, options?, done?)`.

**Parameters**

*   `file` (`File`) -- File object.
*   `value` (`string`) -- Source of a (virtual) file.
*   `options` (`Object`) -- Settings.  See `man 7 mdastconfig`.
*   `done` (`function done(err?, doc?, file?)`).

**Returns**

`string` -- Document.  Formatted in markdown by default, or in whatever a
plugin generates.

### function done(err?, doc?, file?)

Invoked when processing is complete.

**Signatures**

*   `function done(err)`;
*   `function done(null, doc, file)`.

**Parameters**

*   `exception` (`Error`) -- Failure;
*   `doc` (`string`) -- Document generated by the process;
*   `file` (`File`) -- File object representing the input file;

**Returns**

`string` -- Document.  Formatted in markdown by default, or in whatever a
plugin generates.

### FileSet()

**mdast**(1) compiles multiple files using a `FileSet` instance.  This set
is exposed to plug-ins as an argument to the attacher. `FileSet`s
should not be created by plug-ins.

### File#valueOf()

### File#toJSON()

Get access to the file objects in a set.

**Signatures**

*   `files = fileSet.valueOf()`.

**Returns**

`Array.<File>` -- List of files being processed by **mdast**(1).

### FileSet#use(completer)

Add a completer to the middleware pipeline of a file-set.  When all
files are transformed, this pipeline is run and `completer` is invoked
with `fileSet`.

**Signatures**

*   `fileSet.use(completer)`.

**Parameters**

*   `completer` (`Function`).

### FileSet#add(file|filePath)

Add a new file to be processed by **mdast**(1). The given file is
processed just like other files, with a few differences.

Programmatically added files are:

*   Ignored when their file-path is already added;
*   Never written to the file-system;
*   Not logged about.

**Signatures**

*   `fileSet.use(filePath)`;
*   `fileSet.use(file)`.

**Parameters**

*   `filePath` (`string`) - Path to virtual file;
*   `file` (`File`) - Virtual file.

## BUGS

<https://github.com/wooorm/mdast/issues>

## SEE ALSO

**mdast**(1), **mdastconfig**(7).

## AUTHOR

Written by Titus Wormer <mailto:tituswormer@gmail.com>
