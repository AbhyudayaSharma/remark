# mdast(3) -- Markdown processor

## SYNOPSIS

```javascript
var mdast = require('mdast');
var yamlConfig = require('mdast-yaml-config');

// Use a plugin.  mdast-yaml-config allows settings in YAML frontmatter.
var processor = mdast().use(yamlConfig);

// Parse, modify, and stringify the document:
var doc = processor.process(
    '---\n' +
    'mdast:\n' +
    '  commonmark: true\n' +
    '---\n' +
    '\n' +
    '2) Some *emphasis*, **strongness**, and `code`.\n'
);
```

## DESCRIPTION

This is the application programming interface documentation for **mdast**.  To find documentation for the command line interface, see `man 1 mdast`.

### mdast.use(plugin, options?)

Change the way **mdast** functions by using a plugin.  Plugins are documented at <<https://github.com/wooorm/mdast/blob/master/doc/Plugins.md>>.

**Signatures**

*   `processor = mdast.use(plugin, options?)`;
*   `processor = mdast.use(plugins)`.

**Parameters**

*   `plugin` (`Function`) -- Plugin.
*   `plugins` (`Array.<Function>`) -- List of plugins.
*   `options` (`Object?`) -- Passed to plugin.  Specified by its documentation.

**Returns**

`Object` -- An instance of **mdast**.  The instance functions just like the **mdast** library itself (it has the same methods), but caches the `use`d plugins.

### mdast.parse(file, options?)

Parse a markdown document into an abstract syntax tree.

**Signatures**

*   `ast = mdast.parse(value, options?)`;
*   `ast = mdast.parse(file, options?)`.

**Parameters**

*   `file` (`File`) -- File object.
*   `value` (`string`) -- Source of a (virtual) file.
*   `options` (`Object`) -- Settings.  See `man 7 mdastconfig`.

**Returns**

`Object` -- Node.  Nodes are documented at <<https://github.com/wooorm/mdast/blob/master/doc/Nodes.md>>.

### mdast.run(ast, file, done?)

Modify an abstract syntax tree by applying plugins to it.

**Signatures**

*   `ast = mdast.run(ast, value?, done?)`;
*   `ast = mdast.run(ast, file?, done?)`.

**Parameters**

*   `ast` (`Object`) -- Syntax tree as returned by `parse()`;
*   `file` (`File`) -- File object representing the input file;
*   `value` (`string`) -- Source of the (virtual) input file;
*   `done` (`function done(err?, doc?, file?)`).

**Returns**

`Object` -- Given AST.

### mdast.stringify(ast, options?)

Compile an abstract syntax tree into a document.

**Signatures**

*   `doc = mdast.stringify(ast, options?)`.

**Parameters**

*   `ast` (`Object`) -- Syntax tree as returned by `parse()`;
*   `options` (`Object`) -- Settings.  See `man 7 mdastconfig`.

**Returns**

`string` -- Document.  Formatted in markdown by default, or in whatever a plugin generates.

### mdast.process(file, options?, done?)

Parse, modify, and compile a markdown document it into something else.

**Signatures**

*   `doc = mdast.process(value, options?, done?)`;
*   `doc = mdast.process(file, options?, done?)`.

**Parameters**

*   `file` (`File`) -- File object.
*   `value` (`string`) -- Source of a (virtual) file.
*   `options` (`Object`) -- Settings.  See `man 7 mdastconfig`.
*   `done` (`function done(err?, doc?, file?)`).

**Returns**

`string` -- Document.  Formatted in markdown by default, or in whatever a plugin generates.

### function done(err?, doc?, file?)

Invoked when processing is complete.

**Signatures**

*   `function done(err)`;
*   `function done(null, doc, file)`.

**Parameters**

*   `exception` (`Error`) -- Failure;
*   `doc` (`string`) -- Document generated by the process;
*   `file` (`File`) -- File object representing the input file;

**Returns**

`string` -- Document.  Formatted in markdown by default, or in whatever a plugin generates.

### File()

File objects make it easy to change the directory, name, or extension of a file: let's say multiple markdown files are converted to HTML.  Instead of overwriting the markdown sources, file objects make it easy to output files with a different (`"html"`) extension.  In addition, files expose the raw source to plugins.

**Signatures**

*   `file = File(options?)`;
*   `file = File(value?)`;
*   `file = File(file)`.

**Parameters**

*   `value` (`string`) -- Contents of the file;
*   `file` (`File`) -- Existing representation, immediately returned;
*   `options` (`Object`): Parts:
    *   `directory` (`string`, default: `''`) -- Parent directory;
    *   `filename` (`string?`, default: `null`) -- Name, without extension;
    *   `extension` (`string`, default: `'md'`) -- Extension, without dot;
    *   `contents` (`string`, default: `''`) -- Raw value.

**Returns**

`File` -- Instance.

### File#toString()

Getter for internal `contents` property.

**Signatures**

*   `value = file.toString()`.

**Returns**

`string` -- Contents.

### File#exception(reason, position?)

Create an error.

**Signatures**

*   `err = file.exception(reason, node?)`;
*   `err = file.exception(reason, location?)`;
*   `err = file.exception(reason, position?)`.

**Parameters**

*   `reason` (`string`) -- Failure reason;
*   `node` (`Node`) -- Syntax tree object;
*   `location` (`Object`) -- Syntax tree location (found at `node.position`);
*   `position` (`Object`) -- Syntax tree position (found at `node.position.start`).

**Returns**

`Error` -- Pretty error with location information.

This object has the following properties:

*   `file` (`string?`) -- Filename (including extension), if applicable;
*   `reason` (`string`) -- Same as what was passed in;
*   `line` (`number`) -- Starting line of exception;
*   `column` (`number`) -- Starting column of exception.

### File#getFile()

Get the filename, with extension, if applicable.

**Signatures**

*   `filename? = file.getFile()`.

**Returns**

`string?` -- If the `file` has a `filename`, it will be concatenated with the (dotted) extension (if applicable).  Otherwise, null is returned.

## BUGS

<<https://github.com/wooorm/mdast/issues>>

## SEE ALSO

**mdast**(1), **mdastconfig**(7).

## AUTHOR

Written by Titus Wormer <mailto:<mailto:tituswormer@gmail.com>>
